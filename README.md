<img src="https://img.shields.io/badge/node.js-%23339933.svg?&style=for-the-badge&logo=node.js&logoColor=white" /> <img src="https://img.shields.io/badge/javascript-%23F7DF1E.svg?&style=for-the-badge&logo=javascript&logoColor=black" /> <img src="https://img.shields.io/badge/mysql-%234479A1.svg?&style=for-the-badge&logo=mysql&logoColor=white" />

# ë©€í‹° í”Œë ˆì´ ê²Œì„ ì„œë²„ ì œì‘í•˜ê¸°!! - TCP
![image](https://github.com/user-attachments/assets/7dde6af8-a36d-48a0-b6e4-537e6da435ba)</br>

ë±€ì„œë¼ì´í¬ì™€ í•µìŠ¬ì„ ì§¬ë½•í•œ ë©€í‹° í”Œë ˆì´ ê²Œì„ì…ë‹ˆë‹¤.ğŸ±â€ğŸ‘¤ </br>
ê²Œì„ìœ¼ë¡œì„œëŠ” ì™„ì„±ë„ê°€ ë‹¤ì†Œ ë‚®ì§€ë§Œ, TCP ì—°ê²°ì„ í†µí•´ ì„œë²„ ì…ì¥ì—ì„œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ê³ ì í–ˆìŠµë‹ˆë‹¤!

## ê²Œì„ í”Œë ˆì´í•˜ê¸°
https://drive.google.com/file/d/1TCHRNkLBIoRr6Cr2S6peTWQoUKbNm_Sl/view?usp=sharing

- ë¹Œë“œëœ íŒŒì¼ì€ ìœ„ ë§í¬ë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- IP : 3.34.124.193 / PORT : 5555
- ì…ì¥ê³¼ ë™ì‹œì— ê²Œì„ì„ ìœ„í•œ ë£¸ì´ ìƒì„±ë˜ê³ , ë£¸ ê¸°ì¤€ ìµœëŒ€ 4ì¸ê¹Œì§€ ë©€í‹° í”Œë ˆì´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ê°€ê¹Œìš´ ì ì„ ìë™ìœ¼ë¡œ ê³µê²©í•˜ë©° WASDë¡œ ì›€ì§ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì•„êµ°ì„ ë’¤ë¡œ ë°€ì–´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤! ì¬ë°Œê²Œ ë†€ì•„ë³´ì„¸ìš” :)

## ê²Œì„ êµ¬ìƒ

![image](https://github.com/user-attachments/assets/fdaa2881-f0b7-4c12-940c-dc26252cfaa9) </br>
í•µ ì•¤ ìŠ¬ë˜ì‹œ ê²Œì„ì„ ëª©í‘œë¡œ í•˜ê³  ê·¸ë ¤ë³´ì•˜ë˜ ë‹¤ì´ì–´ê·¸ë¨ì…ë‹ˆë‹¤.</br>
í”„ë¡œì íŠ¸ ì´ˆë°˜ì—ëŠ” ì§€ê¸ˆ êµ¬í˜„ëœ ê²ƒë³´ë‹¤ ë” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê¸°íší–ˆì—ˆìŠµë‹ˆë‹¤.ğŸ˜‚

## ERD

![image](https://github.com/user-attachments/assets/fce05001-f3cb-4c48-9611-c25eecf1e436) </br>
DBëŠ” RDSì—ì„œ MySQLì„ ëŒ€ì—¬ë°›ì•„ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤.</br>
ìµœì¢…ì ìœ¼ë¡  ìœ„ì™€ ê°™ì´ êµ¬í˜„ì„ í•  ìƒê°ì´ì—ˆìŠµë‹ˆë‹¤ë§Œ..., í˜„ì¬ëŠ” user í…Œì´ë¸”ë§Œ ì‚¬ìš©í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤.

## íŒ¨í‚· ëª…ì„¸ì„œ

íŒ¨í‚·ì˜ ê³µí†µ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ì´ ë˜ì–´ìˆìŠµë‹ˆë‹¤. </br>
íŒ¨í‚·ì˜ ì§ë ¬í™”ëŠ” í”„ë¡œí† ë²„í”„ë¥¼ í˜•ì‹ì„ ì´ìš©í•˜ì˜€ê³ , </br>
payloadì˜ ì„¸ë¶€ êµ¬ì¡°ê³¼ í•¸ë“¤ëŸ¬ ë§µí•‘ì€ ì•„ë˜ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</br>

| í•„ë“œ ëª…   | íƒ€ì…   | ì„¤ëª…                     |
| --------- | ------ | ------------------------ |
| handlerId | uint32 | í•¸ë“¤ëŸ¬ ID (4ë°”ì´íŠ¸)      |
| userId    | string | ìœ ì € ID (UUID)           |
| version   | string | í´ë¼ì´ì–¸íŠ¸ ë²„ì „ (ë¬¸ìì—´) |
| payload   | bytes  | ì‹¤ì œ ë°ì´í„°              |

</br>
https://docs.google.com/spreadsheets/d/1LyrtTOSzJLXQVYb8oYLTw6vrK-JbyY_k70e8WOPfhhM/edit?usp=sharing

## ì•¡í‹°ë¹„í‹° ë‹¤ì´ì–´ê·¸ë¨

![image](https://github.com/user-attachments/assets/c3f6aa89-f4f9-4ba3-a450-6081879c406f)
![image](https://github.com/user-attachments/assets/3d8b5354-620b-47be-8934-dcec7a851a8e)
ì‹¤ì œ êµ¬í˜„í•œ ë¡œì§ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ í”Œë¡œìš° ì°¨íŠ¸ë¥¼ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

## íŒŒì¼êµ¬ì¡°

```
tcpserver_multigame
â”œâ”€ .gitignore
â”œâ”€ .prettierrc
â”œâ”€ assets
â”‚  â”œâ”€ gate.json
â”‚  â”œâ”€ item.json
â”‚  â”œâ”€ monster.json
â”‚  â””â”€ monster_spawn.json
â”œâ”€ package-lock.json
â”œâ”€ package.json
â”œâ”€ README.md
â””â”€ src
   â”œâ”€ classes
   â”‚  â”œâ”€ managers
   â”‚  â”‚  â”œâ”€ base.manager.js
   â”‚  â”‚  â””â”€ interval.manager.js
   â”‚  â””â”€ models
   â”‚     â”œâ”€ game.class.js
   â”‚     â”œâ”€ monster.class.js
   â”‚     â””â”€ user.class.js
   â”œâ”€ config
   â”‚  â””â”€ config.js
   â”œâ”€ constants
   â”‚  â”œâ”€ env.js
   â”‚  â”œâ”€ handlerIds.js
   â”‚  â””â”€ header.js
   â”œâ”€ db
   â”‚  â”œâ”€ database.js
   â”‚  â”œâ”€ migration
   â”‚  â”‚  â””â”€ createSchemas.js
   â”‚  â”œâ”€ sql
   â”‚  â”‚  â””â”€ user_db.sql
   â”‚  â””â”€ user
   â”‚     â”œâ”€ user.db.js
   â”‚     â””â”€ user.queries.js
   â”œâ”€ events
   â”‚  â”œâ”€ onConnection.js
   â”‚  â”œâ”€ onData.js
   â”‚  â””â”€ onError.js
   â”œâ”€ handlers
   â”‚  â”œâ”€ game
   â”‚  â”‚  â”œâ”€ attackMonster.handler.js
   â”‚  â”‚  â”œâ”€ createMonster.handler.js
   â”‚  â”‚  â”œâ”€ disconnect.handler.js
   â”‚  â”‚  â”œâ”€ onCollision.handler.js
   â”‚  â”‚  â””â”€ updateLocation.handler.js
   â”‚  â”œâ”€ index.js
   â”‚  â””â”€ user
   â”‚     â”œâ”€ initial.handler.js
   â”‚     â””â”€ positionVelocity.handler.js
   â”œâ”€ init
   â”‚  â”œâ”€ assets.js
   â”‚  â”œâ”€ index.js
   â”‚  â””â”€ loadProtos.js
   â”œâ”€ protobuf
   â”‚  â”œâ”€ initial.proto
   â”‚  â”œâ”€ packetNames.js
   â”‚  â”œâ”€ request
   â”‚  â”‚  â”œâ”€ common.proto
   â”‚  â”‚  â””â”€ game.proto
   â”‚  â””â”€ response
   â”‚     â””â”€ response.proto
   â”œâ”€ server.js
   â”œâ”€ session
   â”‚  â”œâ”€ game.session.js
   â”‚  â”œâ”€ monster.session.js
   â”‚  â”œâ”€ sessions.js
   â”‚  â””â”€ user.session.js
   â””â”€ utils
      â”œâ”€ dateFormatter.js
      â”œâ”€ db
      â”‚  â””â”€ testConnection.js
      â”œâ”€ error
      â”‚  â”œâ”€ custom.error.js
      â”‚  â”œâ”€ errorCodes.js
      â”‚  â””â”€ errorHandler.js
      â”œâ”€ notification
      â”‚  â””â”€ game.notification.js
      â”œâ”€ parser
      â”‚  â””â”€ packetParser.js
      â”œâ”€ response
      â”‚  â””â”€ createResponse.js
      â””â”€ transformCase.js
```

## ë„ì „ ê¸°ëŠ¥

### ë§ˆì§€ë§‰ ê²Œì„ ì„¸ì…˜ì— ì ‘ì†í•˜ê¸°

![image](https://github.com/user-attachments/assets/04ff40e1-bb9c-4d4c-85ea-30e7449c2370)</br>
ê²Œì„ ì‹œì‘ê³¼ ë™ì‹œì— ì„¸ì…˜ì´ í•˜ë‚˜ ìƒì„±ë©ë‹ˆë‹¤. ì˜ˆì‹œë¡œ ì œì´ë‚˜ì™€ ì•ˆë‘ì¸ì´ í•œ ì„¸ì…˜ì— ì ‘ì†í•œ ëª¨ìŠµì…ë‹ˆë‹¤.</br>

![image](https://github.com/user-attachments/assets/1494cac9-bc45-4abd-8844-5d502fbcbb75)</br>
ì•ˆë‘ì¸ì´ ì ‘ì†ì„ ì¢…ë£Œí•˜ë©´ ê·¸ ë‹¤ìŒ ì‚¬ìš©ì(ê°€ë¡œì‰¬)ê°€ ì„¸ì…˜ì— ì…ì¥í•©ë‹ˆë‹¤.</br>

![image](https://github.com/user-attachments/assets/a5bcd308-e24b-44a1-98e0-60d5b54e9f20)</br>
í•œ ë²ˆ ì ‘ì†í•œ ìœ ì €ëŠ” ìµœê·¼ ì„¸ì…˜ì˜ IDë¥¼ DBì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.</br>

![image](https://github.com/user-attachments/assets/3bec8a5e-1f5a-4233-87a6-5933c67d2405)
</br>
ë§ˆì§€ë§‰ìœ¼ë¡œ ì €ì¥ëœ ì„¸ì…˜ìœ¼ë¡œ ì ‘ì†ì„ í•˜ë ¤í•˜ì§€ë§Œâ€¦! í…ŒìŠ¤íŠ¸ ì¤‘ í•œ ì„¸ì…˜ì˜ ì •ì›ì„ 2ë¡œ ì„¤ì •í•´ ë‘ì–´ì„œ ìƒˆë¡œìš´ ê²Œì„ ì„¸ì…˜ì´ ìƒì„±ëœ ëª¨ìŠµì…ë‹ˆë‹¤.</br>

![image](https://github.com/user-attachments/assets/416b36d2-243d-4951-8de1-b58d65fc5a0b)</br>
![image](https://github.com/user-attachments/assets/3f246a73-3528-4a0c-8919-ba18a11ad328)</br>
ì´ë²ˆì—” ê°€ë¡œì‰¬ê°€ ì¬ì ‘ì†ì„ í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ë§ˆì§€ë§‰ ì„¸ì…˜ì€ ì œì´ë‚˜ê°€ ìˆë˜ ë°©ê³¼ ì¼ì¹˜í•˜ë¯€ë¡œ, ì œì´ë‚˜ê°€ ìˆëŠ” ë°©ì— ë‹¤ì‹œ ì°¸ì—¬í•˜ê²Œ ë©ë‹ˆë‹¤.</br>

![image](https://github.com/user-attachments/assets/a4cf7603-0ff1-4d0e-8f40-d31b6851e1ea)</br>

### Latency ë¥¼ ì´ìš©í•œ ì¶”ì¸¡í•­ë²• ì ìš©

![Image](https://github.com/user-attachments/assets/9ea350eb-72b1-4983-8970-01d5b689573e)</br>
ì•¡í‹°ë¹„í‹° ë‹¤ì´ì–´ê·¸ë¨ì„ ë°”íƒ•ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ê³ , ë©€í‹°í”Œë ˆì´ í™˜ê²½ì—ì„œëŠ” ìœ„ì™€ ê°™ì´ ì„œë¡œì˜ ìœ„ì¹˜ê°€ ì—…ë°ì´íŠ¸ ë˜ê³  ìˆìŠµë‹ˆë‹¤.</br>

## ì¶”ê°€ ê¸°ëŠ¥
### ëª¬ìŠ¤í„° ê²Œì´íŠ¸
```
{
  "name": "gate",
  "version": "1.0.0",
  "data": [
    {
      "id": 1001,
      "monsterLv": 0,
      "waveCount": 2,
      "monstersPerWave": 5,
      "rewardPool": [],
      "position": { "x": -10, "y": 10 }
    },
    {
      "id": 1002,
      "monsterLv": 5,
      "waveCount": 3,
      "monstersPerWave": 6,
      "rewardPool": [],
      "position": { "x": -10, "y": -10 }
    },
    {
      "id": 1003,
      "monsterLv": 10,
      "waveCount": 3,
      "monstersPerWave": 6,
      "rewardPool": [],
      "position": { "x": 10, "y": 10 }
    },
    {
      "id": 1004,
      "monsterLv": 15,
      "waveCount": 4,
      "monstersPerWave": 7,
      "rewardPool": [],
      "position": { "x": 10, "y": -10 }
    },
    {
      "id": 1005,
      "monsterLv": 20,
      "waveCount": 4,
      "monstersPerWave": 7,
      "rewardPool": [],
      "position": { "x": -20, "y": 20 }
    },
    {
      "id": 1006,
      "monsterLv": 25,
      "waveCount": 5,
      "monstersPerWave": 8,
      "rewardPool": [],
      "position": { "x": -20, "y": -20 }
    }
  ]
}
```
ì„œë²„ ì¸¡ì˜ ì—°ì‚°ì„ ì¤„ì´ê³  ë‹¤ì–‘í•œ ê²Œì´íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ê²Œì„ ì—ì…‹ì„ jsonìœ¼ë¡œ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</br>
í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëª¬ìŠ¤í„° ê²Œì´íŠ¸ì™€ ëª¬ìŠ¤í„° ì›¨ì´ë¸Œë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</br>
ì„œë²„ ë˜í•œ í•´ë‹¹ íŒŒì¼ì„ í†µí•´ ëª¬ìŠ¤í„°ì˜ ì„¸ë¶€ ë°ì´í„°ë¥¼ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤.</br>

### ê²Œì„ ì¢…ë£Œ ê¸°ëŠ¥
ê²Œì„ ì¢…ë£Œì™€ ê´€ë ¨ëœ ê³ ì§ˆì ì¸ ë²„ê·¸ë¥¼ ê²ªê²Œ ë˜ì—ˆê³ , ë¬¸ì œë¥¼ ì—¬ëŸ¬ ë°©ë©´ì—ì„œ í•´ê²°í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</br>
ì½”ë“œ ë‚´ìš©ì´ ê¸¸ì–´ì„œ ë¸”ë¡œê·¸ì— ë”°ë¡œ ê¸€ì„ ê²Œì‹œí•˜ì˜€ìŠµë‹ˆë‹¤.</br>

https://princeali.tistory.com/115
